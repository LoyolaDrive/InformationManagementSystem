{% extends "dashboard.html" %}

{% block content %}
<div class="container mt-4">
    <div class="mb-3">
        <button class="btn btn-outline-primary filter-btn" data-filter="All">All</button>
        <button class="btn btn-outline-primary filter-btn" data-filter="National">National</button>
        <button class="btn btn-outline-success filter-btn" data-filter="Regional">Regional</button>
        <button class="btn btn-outline-warning filter-btn" data-filter="Global">Global</button>
        <button class="btn btn-outline-danger filter-btn" data-filter="Local">Local</button>
    </div>
    {% for announcement in announcements %}
    <div class="card mb-3 announcement-card" data-level="{{ announcement.email_level }}">
        <div class="card-header" id="heading{{ forloop.counter }}">
            <div class="row align-items-center w-100">
                <h5 class="mb-0 d-flex justify-content-between align-items-center">
                    <div class="col-md-6">
                        <button class="btn btn-link text-decoration-none" data-bs-toggle="collapse" data-bs-target="#collapse{{ forloop.counter }}" aria-expanded="true" aria-controls="collapse{{ forloop.counter }}">
                            {{ announcement.subject }}
                        </button>
                    </div>
                    <div class="col-md-3 text-md-center text-start">
                        <!-- Level Badge -->
                        <span class="badge 
                            {% if announcement.email_level|stringformat:"s" == 'National' %}bg-primary
                            {% elif announcement.email_level|stringformat:"s" == 'Regional' %}bg-success
                            {% elif announcement.email_level|stringformat:"s" == 'Global' %}bg-warning
                            {% elif announcement.email_level|stringformat:"s" == 'Local' %}bg-danger
                            {% else %}bg-secondary
                            {% endif %}">
                            {{ announcement.email_level }}
                        </span>
                    </div>
                    <div class="col-md-3 text-md-center text-start">
                        <!-- Type Badge -->
                        <span class="badge 
                            {% if announcement.email_type|stringformat:"s" == 'Submission' %}bg-dark
                            {% elif announcement.email_type|stringformat:"s" == 'Announcement' %}bg-info
                            {% elif announcement.email_type|stringformat:"s" == 'Reminder' %}bg-secondary
                            {% else %}bg-light
                            {% endif %}">
                            {{ announcement.email_type }}
                        </span>
                    </div>
                </h5>
            </div>
        </div>
        <div id="collapse{{ forloop.counter }}" class="collapse" aria-labelledby="heading{{ forloop.counter }}" data-bs-parent="#accordionExample">
            <div class="card-body">
                {{ announcement.content|linebreaks }}
            </div>
        </div>
    </div>
    {% empty %}
    <p>No announcements available.</p>
    {% endfor %}
</div>
<div class="col-md-4">
    <div class="card">
        <div class="card-header text-center">Loyola Calendar</div>
        <div class="card-body">
            <p class="text-center">March 2025</p>
            <!-- Placeholder for Calendar -->
            <p class="text-center">ðŸ“… [Calendar Placeholder]</p>
            <h6>Important Dates / Events</h6>
            <ul>
                <li>Feb 18 - Commemoration Night</li>
                <li>Feb 19 - Mass at Cathedral</li>
                <li>Feb 21 - Commemoration Night</li>
                <li>Feb 23 - Mass at Cathedral</li>
            </ul>
            <button class="btn btn-outline-primary w-100">View More</button>
        </div>
    </div>
</div>
{% endblock content %}
