{% extends "dashboard.html" %}

{% block extra_js %}{% endblock %}

{% block content %}
{% if messages %}
{% for message in messages %}
<div class="my-4 mx-3 alert alert-{{ message.tags }} text-center {% if message.tags == 'error' %}bg-danger text-white rounded{% endif %}">
    {{ message }}
</div>
{% endfor %}
{% endif %}
<form action="{% url 'users:editAccount' user.id %}" method="POST">
    {% csrf_token %}
    <input type="hidden" name="_method" value="PATCH">

    <!-- User Info -->

    <div class="form-outline mb-4">
        <label class="form-label" for="role">User Role</label>
        <select name="role" id="role" value="{{ currentrole.role_id }}">
            {% for role in roles %}
                <option value="{{ role.role_id }}" 
                    {% if role.role_id == currentrole.role_id %} selected {% endif %}>
                    {{ role.role_desc }}
                </option>
            {% endfor %}
        </select>
      </div>

    <div class="mb-3">
        <label for="first_name" class="form-label">First Name</label>
        <input type="text" name="first_name" class="form-control" value="{{ user.first_name }}" required>
    </div>

    <div class="mb-3">
        <label for="last_name" class="form-label">Last Name</label>
        <input type="text" name="last_name" class="form-control" value="{{ user.last_name }}" required>
    </div>

    <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" name="email" class="form-control" value="{{ user.email }}" required>
    </div>

    <button type="submit" class="btn btn-primary mt-3">Save Changes</button>
</form>

{% endblock content %}